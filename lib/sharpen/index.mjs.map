{"version":3,"file":"index.mjs","sources":["../../src/sharpen/index.ts"],"sourcesContent":["import { Filter, GlProgram } from 'pixi.js';\nimport vertex from '../defaults/default.vert';\nimport fragment from './fragment.frag';\n\nexport class Sharpen extends Filter\n{\n    private uniforms: {\n        uMatrix: Float32Array;\n        uSize: Float32Array;\n        uValue: number;\n    };\n    constructor(value: number = 0)\n    {\n        const glProgram = GlProgram.from({ fragment, vertex, name: 'sharpen' });\n\n        super({\n            glProgram,\n            resources: {\n                sharpenUniforms: {\n                    uMatrix: { value: new Float32Array(9), type: 'mat3x3<f32>' },\n                    uSize: { value: new Float32Array(2), type: 'vec2<f32>' },\n                    uValue: { value: 0, type: 'f32' },\n                },\n            },\n        });\n        this.uniforms = this.resources.sharpenUniforms.uniforms;\n        this.value = value;\n    }\n\n    get value(): number\n    {\n        return this.uniforms.uValue;\n    }\n    set value(value: number)\n    {\n        const [width, height] = this.resources?.filterGlobals?.uniforms\n            ?.inputSize ?? [1920, 1080];\n\n        this.uniforms.uMatrix = new Float32Array([\n            -1, -1, -1, -1, 9, -1, -1, -1, -1,\n        ]);\n        this.uniforms.uSize[0] = 1 / width;\n        this.uniforms.uSize[1] = 1 / height;\n        this.uniforms.uValue = value / 2;\n    }\n}\n"],"names":[],"mappings":";;;;AAIO,MAAM,gBAAgB,MAC7B,CAAA;AAAA,EAMI,WAAA,CAAY,QAAgB,CAC5B,EAAA;AACI,IAAM,MAAA,SAAA,GAAY,UAAU,IAAK,CAAA,EAAE,UAAU,MAAQ,EAAA,IAAA,EAAM,WAAW,CAAA,CAAA;AAEtE,IAAM,KAAA,CAAA;AAAA,MACF,SAAA;AAAA,MACA,SAAW,EAAA;AAAA,QACP,eAAiB,EAAA;AAAA,UACb,OAAA,EAAS,EAAE,KAAO,EAAA,IAAI,aAAa,CAAC,CAAA,EAAG,MAAM,aAAc,EAAA;AAAA,UAC3D,KAAA,EAAO,EAAE,KAAO,EAAA,IAAI,aAAa,CAAC,CAAA,EAAG,MAAM,WAAY,EAAA;AAAA,UACvD,MAAQ,EAAA,EAAE,KAAO,EAAA,CAAA,EAAG,MAAM,KAAM,EAAA;AAAA,SACpC;AAAA,OACJ;AAAA,KACH,CAAA,CAAA;AACD,IAAK,IAAA,CAAA,QAAA,GAAW,IAAK,CAAA,SAAA,CAAU,eAAgB,CAAA,QAAA,CAAA;AAC/C,IAAA,IAAA,CAAK,KAAQ,GAAA,KAAA,CAAA;AAAA,GACjB;AAAA,EAEA,IAAI,KACJ,GAAA;AACI,IAAA,OAAO,KAAK,QAAS,CAAA,MAAA,CAAA;AAAA,GACzB;AAAA,EACA,IAAI,MAAM,KACV,EAAA;AACI,IAAM,MAAA,CAAC,KAAO,EAAA,MAAM,CAAI,GAAA,IAAA,CAAK,SAAW,EAAA,aAAA,EAAe,QACjD,EAAA,SAAA,IAAa,CAAC,IAAA,EAAM,IAAI,CAAA,CAAA;AAE9B,IAAK,IAAA,CAAA,QAAA,CAAS,OAAU,GAAA,IAAI,YAAa,CAAA;AAAA,MACrC,CAAA,CAAA;AAAA,MAAI,CAAA,CAAA;AAAA,MAAI,CAAA,CAAA;AAAA,MAAI,CAAA,CAAA;AAAA,MAAI,CAAA;AAAA,MAAG,CAAA,CAAA;AAAA,MAAI,CAAA,CAAA;AAAA,MAAI,CAAA,CAAA;AAAA,MAAI,CAAA,CAAA;AAAA,KAClC,CAAA,CAAA;AACD,IAAK,IAAA,CAAA,QAAA,CAAS,KAAM,CAAA,CAAA,CAAA,GAAK,CAAI,GAAA,KAAA,CAAA;AAC7B,IAAK,IAAA,CAAA,QAAA,CAAS,KAAM,CAAA,CAAA,CAAA,GAAK,CAAI,GAAA,MAAA,CAAA;AAC7B,IAAK,IAAA,CAAA,QAAA,CAAS,SAAS,KAAQ,GAAA,CAAA,CAAA;AAAA,GACnC;AACJ;;;;"}